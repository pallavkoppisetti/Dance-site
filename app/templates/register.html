<!doctype html>
<html lang="en">

<head>
  <title>Register</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="stylesheet" href="static/css/login.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">

  <title>DanceWeb</title>
</head>

<body>
  <div class='nav-brand'>
    <a href='/'>
      <div class="back_but">
        <img src='static/img/back_button_2.png' alt='back_button' width='50px' height='50px'>
      </div>
    </a>
  </div>
  <div class="container">
    <div class="row reg_font">
      <div class="col-lg-3 col-md-2"></div>
      <div class="col-lg-6 col-md-8 login-box">
        <div class="col-lg-12 login-key">
          <i class="bi bi-stars"></i>
        </div>
        <br>
        <p style="color: white; font-size: large; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">JAI ANANDHA SCHOOL OF DANCE</p>
        <div class="col-lg-12 login-key">
          <i class="bi bi-key"></i>
        </div>
        <div class="col-lg-12 login-title">
          REGISTER
        </div>
        <div class="col-lg-12 login-form">
          <div class="col-lg-12 login-form">
            <form id="RegistrationForm" class="needs-validation" action="/register" method="post" novalidate>
              <div class="form-row">
                <div class="col-md-14 mb-3">
                  <label class="form-control-label">NAME</label>
                  <input type="text" name="name" class="form-control" id="validationCustom01" required>
                  <div class="valid-feedback">
                    Looks good!
                  </div>
                </div>
                <div class="col-md-14 mb-3">
                  <label class="form-control-label">USERNAME</label>
                  <div class="input-group">
                    <input type="text" name="username" class="form-control" id="validationCustomUsername"
                      aria-describedby="inputGroupPrepend" required>
                    <div class="invalid-feedback">
                      Please choose a username.
                    </div>
                  </div>
                </div>
              </div>
              <div class="form-row">
                <div class="col-md-14 mb-3">
                  <label class="form-control-label">EMAIL</label>
                  <input type="text" name="email" class="form-control" id="validationCustom03" required>
                  <div class="invalid-feedback">
                    Please provide a valid email.
                  </div>
                </div>
                <div class="col-md-14 mb-3">
                  <label class="form-control-label">NUMBER</label>
                  <input type="text" name="number" class="form-control" id="validationCustom04" required>
                  <div class="invalid-feedback">
                    Please provide a valid number.
                  </div>
                </div>
                <div class="col-md-14 mb-3">
                  <label class="form-control-label">PASSWORD</label>
                  <input type="text" name="password" class="form-control" id="validationCustom05" required>
                  <div class="invalid-feedback">
                    Please provide a valid password.
                  </div>
                </div>


            </form>
            

            


          </div>
          
        </div>

        <div class="col-lg-3 col-md-2"></div>
        <div class="col-lg-6 login-btm login-button">
          <button id="submitButton" class="btn btn-outline-primary">REGISTER</button>
        </div>
      </div>
    </div>
  </div>
  <script>
    const form = document.getElementById('RegistrationForm');
    const submitButton = document.getElementById('submitButton');
    const count = form ? form.length - 1 : 0;

    let fields = []

    function stringContainsNumber(_string){
      let matchPattern =_string.match(/\d+/g);
     if (matchPattern != null) {
      // console.log('The input string contain numbers');
      return 1;
     }
     else{
    //  console.log('The input string does not contain numbers');
      return 0;
     }
    }

    function validateEmail(email) 
    {
        var re = /\S+@\S+\.\S+/;
        return re.test(email);
    }

    function validatePhoneNumber(input_str) {
      var re = /^\(?(\d{3})\)?[- ]?(\d{3})[- ]?(\d{4})$/;
      return re.test(input_str);
    }

    if (submitButton) {
      submitButton.addEventListener('click', function (event) {
        for (let i = 0; i <= count; i += 1) {
          fields[i] = form[i].value;
        }
        console.log(fields);
        // console.log(form);
        let isnum = /^\d+$/.test(fields[3]);
        let isalphanum = /^[a-zA-Z0-9]+$/.test(fields[1]);
        console.log(stringContainsNumber(fields[0]))
        if(fields[0] == "" || stringContainsNumber(fields[0]))
        {
          alert("Please enter a valid name!")
        }
        else if(fields[1] == "" || !isalphanum)
        {
          alert("Please enter a valid username!")
        }
        else if(fields[2] == "" || !validateEmail(fields[2]))
        {
          alert("Please enter a valid email!")
        }
        else if(fields[3] == "" || !isnum && !(fields[3].length == 10))
        {
          alert("Please enter a valid number!")
        }
        else if(fields[4] == "" || fields[4].length < 8)
        {
          alert("Password should atleast have 8 characters!")
        }
        else{
          alert("Successfully registered!")
          form.submit();
        }
      });
    }
  </script>
</body>
</html>